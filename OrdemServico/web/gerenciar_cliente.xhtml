<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.prime.com.tr/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:body>
        <!-- esta página utiliza como template o tema "template.xhtml" -->
        <ui:composition template="template.xhtml">
            <!-- O titulo desta página é "Inserir Clientes" -->
            <ui:param name="titulo" value="Inserir Clientes" />
            <!-- O que foi informado como "conteúdo" no template deve ser preenchido com isto: -->
            <ui:define name="conteudo">
                <p style="margin-top: 10px">
                    <img src="images/user.png" style="float:left; margin-right: 14px; margin-top: -10px"/>
                    <h1>Gerenciamento de Clientes</h1><br/>
                </p>

                <h:form id="form1">

                    <p:growl id="growl" showDetail="true" life="10000" />

                    <p style="margin-left: 280px; margin-bottom: 20px">
                        <p:commandButton value="Novo Cliente" action="#{ClienteController.resetCliente}"
                                         update="tabela cliente form2" ajax="true" oncomplete="clienteDialog.show()" />
                    </p>

                    <p:dataTable var="clientes" value="#{ClienteController.usuarios}" selection="#{ClienteController.cliente}"
                                 selectionMode="single" onRowSelectUpdate="cliente form2"
                                 onRowSelectComplete="clienteDialog.show()" id="tabela" >

                        <f:facet name="header">
                            Lista de Clientes
                        </f:facet>

                        <p:column filterBy="#{clientes.nome}" style="height: 28px">
                            <f:facet name="header">
                                <h:outputText value="Nome" />
                            </f:facet>
                            <h:outputText value="#{clientes.nome}" />
                        </p:column>

                        <p:column filterBy="#{clientes.contato}" style="height: 28px">
                            <f:facet name="header">
                                <h:outputText value="Contato" />
                            </f:facet>
                            <h:outputText value="#{clientes.contato}" />
                        </p:column>

                        <p:column filterBy="#{clientes.cidade}" style="height: 28px">
                            <f:facet name="header">
                                <h:outputText value="Cidade" />
                            </f:facet>
                            <h:outputText value="#{clientes.cidade}" />
                        </p:column>

                        <p:column filterBy="#{clientes.email}" style="height: 28px">
                            <f:facet name="header">
                                <h:outputText value="E-mail" />
                            </f:facet>
                            <h:outputText value="#{clientes.email}" />
                        </p:column>

                    </p:dataTable>
                </h:form>

                <h:form id="form2">
                    <p:dialog widgetVar="clienteDialog" resizable="false"
                              width="1200" showEffect="explode" hideEffect="explode" appendToBody="false"
                              onCloseUpdate="form1 tabela">
                        
                        <h:panelGroup>

                            <h:panelGrid id="cliente" columns="2" border="0" cellpadding="5px">
                                <h:panelGrid id="parte1" columns="2" style="float: left">
                                    Nome:
                                    <p:inputText id="nome" value="#{ClienteController.cliente.nome}" styleClass="form_tabela"
                                                 required="true" requiredMessage="Campo Nome obrigatório"/>
                                    E-mail:
                                    <p:inputText id="email" value="#{ClienteController.cliente.email}" styleClass="form_tabela"
                                                 required="true" requiredMessage="Campo E-mail obrigatório"/>
                                    Senha:
                                    <p:inputText id="senha" value="#{ClienteController.cliente.senha}" styleClass="form_tabela"
                                                 required="true" requiredMessage="Campo Senha obrigatório"/>
                                    Contato:
                                    <p:inputText id="contato" value="#{ClienteController.cliente.contato}" styleClass="form_tabela"
                                                 required="true" requiredMessage="Campo Contato obrigatório"/>
                                    CNPJ:
                                    <p:inputText id="cnpj" value="#{ClienteController.cliente.cnpj}" styleClass="form_tabela"
                                                 required="true" requiredMessage="Campo CNPJ obrigatório"/>
                                    Inscrição Estadual:
                                    <p:inputText id="insc_estadual" value="#{ClienteController.cliente.inscricaoEstadual}" styleClass="form_tabela"
                                                 required="true" requiredMessage="Campo Inscrição Estadual obrigatório"/>
                                    Endereço:
                                    <p:inputText id="endereco" value="#{ClienteController.cliente.endereco}" styleClass="form_tabela"
                                                 required="true" requiredMessage="Campo Endereço obrigatório"/>
                                    Complemento:
                                    <p:inputText id="complemento" value="#{ClienteController.cliente.complemento}" styleClass="form_tabela"
                                                 required="true" requiredMessage="Campo Complemento obrigatório"/>
                                </h:panelGrid>

                                <h:panelGrid id="parte2" columns="2" style="margin-left: 10px">
                                    Bairro:
                                    <p:inputText id="bairro" value="#{ClienteController.cliente.bairro}" styleClass="form_tabela"
                                                 required="true" requiredMessage="Campo Bairro obrigatório"/>
                                    Cidade:
                                    <p:inputText id="cidade" value="#{ClienteController.cliente.cidade}" styleClass="form_tabela"
                                                 required="true" requiredMessage="Campo Cidade obrigatório"/>
                                    Estado:
                                    <p:inputText id="estado" value="#{ClienteController.cliente.estado}" styleClass="form_tabela"
                                                 required="true" requiredMessage="Campo Estado obrigatório"/>
                                    Cep:
                                    <p:inputText id="cep" value="#{ClienteController.cliente.cep}" styleClass="form_tabela"
                                                 required="true" requiredMessage="Campo Cep obrigatório"/>
                                    Telefone:
                                    <p:inputText id="telefone" value="#{ClienteController.cliente.telefone}" styleClass="form_tabela"
                                                 required="true" requiredMessage="Campo Telefone obrigatório"/>
                                    Telefone Fax:
                                    <p:inputText id="fax" value="#{ClienteController.cliente.fax}" styleClass="form_tabela"
                                                 required="true" requiredMessage="Campo Telefone Fax obrigatório"/>
                                    Observação:
                                    <p:inputTextarea id="observacao" value="#{ClienteController.cliente.observacao}" autoResize="false"
                                                     effectDuration="1000" maxHeight="200" style="width:420px;height:50px; margin-top: 10px"
                                                     required="true" requiredMessage="Campo Observação obrigatório"/>
                                </h:panelGrid>

                                <h:panelGroup style="float: left; margin-right: -110px; margin-top: 20px">
                                    <p:commandButton action="#{ClienteController.salvar}" value="Salvar" style="margin-right: 20px"
                                                     update="growl form2 form1 tabela" rendered="#{ClienteController.cliente.id eq 0}" />

                                    <p:commandButton value="Editar" action="#{ClienteController.editar}" style="margin-right: 20px"
                                                     update="growl form2 form1 tabela" rendered="#{not (ClienteController.cliente.id eq 0)}"
                                                     oncomplete="clienteDialog.hide()"/>

                                    <p:commandButton value="Limpar" type="reset" rendered="#{ClienteController.cliente.id eq 0}"/>

                                </h:panelGroup>

                            </h:panelGrid>
                        </h:panelGroup>
                    </p:dialog>
                </h:form>

            </ui:define>
        </ui:composition>
    </h:body>
</html>